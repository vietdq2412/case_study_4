<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link rel="stylesheet" href="static/css/login.css">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
            crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<style>
    .bg {
        width: 70%;
        height: 90%;
        background-color: silver;
        position: relative;
        margin: 0 auto;

        border-radius: 11px;

        background-image: url("https://cdn.searchenginejournal.com/wp-content/uploads/2021/09/16-reasons-why-social-media-is-important-to-your-company-616d3200e6dc6-sej.png");
        opacity: 0.2;
    }
</style>
<body>
<hr>
<div class="bg">

</div>
<div class="row" id="header">

</div>
<div class="row snippet-container">

    <div class="login-box">
        <h2>Login</h2>
        <form>
            <div class="user-box">
                <input type="text" name="username" id="username" required="">
                <label>Username</label>
            </div>
            <div class="user-box">
                <input type="password" name="password" id="password" required="">
                <label>Password</label>
            </div>
            <h6 style="color:red; font-size: small" id="error"></h6>
            <h6 style="color:red; font-size: small" id="message"></h6>
            <a style="color: #03e9f4" onclick="login()">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
                Login
            </a>
            ....
            <a style="color: #03e9f4">Register</a>
        </form>

    </div>
</div>
<script>

    function login() {
        let account = {
            username: $("#username").val(),
            password: $("#password").val()
        }
        console.log(account)
        $.ajax({
            type: "Post",
            headers: {
                Authorization: "",
            },
            contentType: 'application/json; charset=utf-8',
            data: JSON.stringify(account),
            url: "http://localhost:8081/rest/login",
            //xử lý khi thành công
            success: function (data) {
                window.localStorage.setItem("Authorization", JSON.stringify(data));
                console.log(data)
                $("#message").text("login succes! " + data);
                $("#error").text("")
            },
            error: function (data) {4
                console.log(data)
                $("#message").text("")
                $("#error").text("invalid username or password!")
            }
        });
        //chặn sự kiện mặc định của thẻ
        // event.preventDefault();
    }
</script>
</body>
</html>